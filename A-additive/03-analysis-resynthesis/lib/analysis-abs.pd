#N canvas 206 127 732 770 10;
#X floatatom 404 90 15 0 0 0 - - -, f 15;
#X obj 94 423 r window-size;
#X obj 184 423 r analysis-hop;
#X obj 43 51 inlet;
#X msg 94 445 npts \$1;
#X msg 184 445 hop \$1;
#X obj 43 581 spigot;
#X msg 116 552 1;
#X msg 76 552 0;
#X obj 123 308 switch~;
#X msg 163 279 1;
#X msg 123 279 0;
#X obj 417 547 /;
#X obj 447 547 r analysis-hop;
#X obj 447 568 t b f;
#X obj 417 598 + 0.5;
#X obj 417 619 i;
#X floatatom 434 400 15 0 0 0 - - -, f 15;
#X obj 43 490 sigmund~ -npeak 20 tracks;
#X msg 189 188 \; martha-dsp-switch 0 \;;
#X msg 214 305 \; martha-dsp-switch 1 \;;
#N canvas 129 292 795 418 track-data-text-writer 0;
#X obj 131 138 f;
#X obj 161 139 + 1;
#X msg 151 114 0;
#X obj 70 75 t l b;
#X msg 401 81 clear;
#X obj 460 85 symbol;
#X obj 179 248 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 179 268 openpanel;
#X msg 179 289 clear \, read \$1;
#X obj 401 41 r clear-all-track-data-\$1;
#X obj 460 64 r save-global-track-data-\$1;
#X obj 520 85 r file-name-\$1;
#X obj 401 349 text define global-track-data-\$1-text;
#X obj 70 179 text set global-track-data-\$1-text;
#X obj 151 94 r clear-all-track-data-\$1;
#X obj 70 54 r global-track-data-\$1;
#X msg 460 115 write ../data/\$1-track-data.txt;
#X obj 524 255 r loadfile-track-data-\$1;
#X connect 0 0 1 0;
#X connect 0 0 13 1;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 3 0 13 0;
#X connect 3 1 0 0;
#X connect 4 0 12 0;
#X connect 5 0 16 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 9 0 4 0;
#X connect 10 0 5 0;
#X connect 11 0 5 1;
#X connect 14 0 2 0;
#X connect 15 0 3 0;
#X connect 16 0 12 0;
#X connect 17 0 12 0;
#X restore 403 198 pd track-data-text-writer;
#X msg 210 128 0;
#X msg 183 368 1;
#X obj 43 123 t b b b b b b;
#N canvas 91 530 572 363 look-for-analysis-finished 0;
#X obj 246 193 &&;
#X obj 67 40 inlet;
#X obj 67 61 t b l;
#X obj 67 131 t b f;
#X obj 67 179 list;
#X obj 67 200 route;
#X obj 117 179 r num-tracks;
#X obj 117 200 - 1;
#X obj 67 221 unpack f f f;
#X obj 246 235 once;
#X obj 246 214 select 1 0;
#X obj 248 106 print -n;
#X obj 246 162 == -1;
#X obj 246 266 delay;
#X obj 336 245 /;
#X obj 336 266 * 1000;
#X obj 358 135 delay 500;
#X obj 336 195 r window-size;
#X obj 276 193 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 336 216 * 2;
#X obj 67 110 value end-of-file-\$1;
#X msg 248 85 **** Analysis \$1 finished;
#X obj 248 55 symbol \$1;
#X obj 358 114 r analysis-\$1-finished;
#X obj 358 156 s load-track-data-\$1-to-tables;
#X obj 366 245 r sample-\$1-sampling-rate;
#X obj 246 302 s analysis-\$1-finished;
#X obj 248 34 r analysis-\$1-finished;
#X connect 0 0 10 0;
#X connect 0 0 18 0;
#X connect 1 0 2 0;
#X connect 2 0 20 0;
#X connect 2 1 4 1;
#X connect 3 0 4 0;
#X connect 3 1 0 1;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 5 1;
#X connect 8 2 12 0;
#X connect 9 0 13 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 12 0 0 0;
#X connect 13 0 26 0;
#X connect 14 0 15 0;
#X connect 15 0 13 1;
#X connect 16 0 24 0;
#X connect 17 0 19 0;
#X connect 19 0 14 0;
#X connect 20 0 3 0;
#X connect 21 0 11 0;
#X connect 22 0 21 0;
#X connect 23 0 16 0;
#X connect 25 0 14 1;
#X connect 27 0 22 0;
#X restore 104 639 pd look-for-analysis-finished;
#X obj 43 602 t l l;
#X obj 103 582 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 103 279 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 145 370 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 284 423 r num-tracks;
#X msg 284 445 npeak \$1;
#X floatatom 434 480 15 0 0 0 - - -, f 15;
#X obj 417 425 +;
#X text 438 501 Add an extra half second so there's plenty of extra
space, f 23;
#X obj 447 446 / 2;
#X obj 374 49 r analysis-\$1-num-frames;
#X msg 43 692 \; global-track-data-\$5 \$1 \$2 \$3 \$4 \;;
#X obj 43 663 list append \$1;
#X obj 76 530 r analysis-\$1-finished;
#X obj 183 390 value end-of-file-\$1;
#X obj 210 150 value end-of-file-\$1;
#X obj 166 222 s clear-all-track-data-\$1;
#X obj 43 338 tabplay~ sample-array-\$1;
#X obj 417 641 s analysis-\$1-num-frames;
#X obj 447 425 r sample-\$1-sampling-rate;
#X obj 417 365 r sample-\$1-num-samples;
#N canvas 615 405 861 554 load-from-text-to-tables 0;
#X obj 119 154 until;
#X obj 119 205 f;
#X obj 149 206 + 1;
#X msg 139 177 0;
#X obj 119 362 unpack f f f;
#X floatatom 154 127 10 0 0 0 - - -, f 10;
#X floatatom 733 335 10 0 0 0 - - -, f 10;
#X obj 119 280 list split 1;
#X obj 119 301 t b f;
#X obj 119 322 list;
#X obj 119 226 t f f;
#X obj 668 299 i;
#X obj 70 44 t b b b, f 17;
#X obj 47 503 print -n;
#X obj 668 278 /;
#X obj 698 278 r num-tracks;
#X text 457 195 Since there are num-tracks lines in the text file per
analysis frame the index to write to for any given track's data tables
is floor(i/num-tracks);
#X obj 42 47 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 119 79 text size global-track-data-\$1-text;
#X obj 119 259 text get global-track-data-\$1-text;
#X obj 119 430 tabwrite;
#X obj 359 430 tabwrite;
#X obj 605 428 tabwrite;
#X msg 47 482 **** Analysis data \$1 loaded;
#X obj 47 452 symbol \$1;
#X obj 243 315 pack f s;
#X obj 308 325 symbol \$1;
#X obj 308 304 loadbang;
#X msg 243 389 set track-\$2-\$1-frequency;
#X msg 453 389 set track-\$2-\$1-amplitude;
#X msg 653 389 set track-\$2-\$1-flag;
#X obj 70 23 r load-track-data-\$1-to-tables;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 10 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 20 0;
#X connect 4 1 21 0;
#X connect 4 2 22 0;
#X connect 7 0 8 0;
#X connect 7 1 9 1;
#X connect 8 0 9 0;
#X connect 8 1 25 0;
#X connect 9 0 4 0;
#X connect 10 0 19 0;
#X connect 10 1 14 0;
#X connect 11 0 6 0;
#X connect 11 0 20 1;
#X connect 11 0 21 1;
#X connect 11 0 22 1;
#X connect 12 0 24 0;
#X connect 12 1 18 0;
#X connect 12 2 3 0;
#X connect 14 0 11 0;
#X connect 15 0 14 1;
#X connect 17 0 12 0;
#X connect 18 0 5 0;
#X connect 18 0 0 0;
#X connect 19 0 7 0;
#X connect 23 0 13 0;
#X connect 24 0 23 0;
#X connect 25 0 28 0;
#X connect 25 0 29 0;
#X connect 25 0 30 0;
#X connect 26 0 25 1;
#X connect 27 0 26 0;
#X connect 28 0 20 0;
#X connect 29 0 21 0;
#X connect 30 0 22 0;
#X connect 31 0 12 0;
#X restore 403 218 pd load-from-text-to-tables;
#X obj 123 250 r analysis-\$1-finished;
#X obj 214 283 r analysis-\$1-finished;
#X obj 374 129 s resize-all-track-tables-\$1;
#X obj 390 356 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 24 0;
#X connect 4 0 18 0;
#X connect 5 0 18 0;
#X connect 6 0 26 0;
#X connect 7 0 6 1;
#X connect 7 0 27 0;
#X connect 8 0 6 1;
#X connect 8 0 27 0;
#X connect 10 0 9 0;
#X connect 10 0 28 0;
#X connect 11 0 9 0;
#X connect 11 0 28 0;
#X connect 12 0 15 0;
#X connect 13 0 14 0;
#X connect 14 0 12 0;
#X connect 14 1 12 1;
#X connect 15 0 16 0;
#X connect 16 0 44 0;
#X connect 18 0 6 0;
#X connect 22 0 41 0;
#X connect 23 0 40 0;
#X connect 24 0 43 0;
#X connect 24 1 7 0;
#X connect 24 2 10 0;
#X connect 24 3 42 0;
#X connect 24 4 19 0;
#X connect 24 5 22 0;
#X connect 26 0 38 0;
#X connect 26 1 25 0;
#X connect 30 0 31 0;
#X connect 31 0 18 0;
#X connect 33 0 32 0;
#X connect 33 0 12 0;
#X connect 35 0 33 1;
#X connect 36 0 0 0;
#X connect 36 0 50 0;
#X connect 38 0 37 0;
#X connect 39 0 8 0;
#X connect 43 0 18 0;
#X connect 43 1 23 0;
#X connect 43 1 29 0;
#X connect 45 0 35 0;
#X connect 46 0 17 0;
#X connect 46 0 33 0;
#X connect 48 0 11 0;
#X connect 49 0 20 0;
