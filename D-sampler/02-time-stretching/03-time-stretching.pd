#N canvas 387 148 773 741 10;
#X obj 198 194 cos~;
#X obj 198 169 -~ 0.5;
#X obj 72 614 soundfiler;
#X obj 44 133 +~ 1;
#X obj 44 291 *~;
#X obj 44 204 +~;
#X obj 78 181 samphold~;
#X msg 72 593 read -resize ../../audio/voice.wav \$1-sample;
#X obj 72 563 f \$0;
#X obj 271 637 table \$0-sample;
#X obj 44 234 tabread4~ \$0-sample;
#X obj 198 217 +~ 1;
#X obj 198 238 *~ 0.5;
#X obj 78 158 r \$0-read-point;
#X obj 309 469 s \$0-read-point;
#X obj 44 402 output~;
#X obj 44 362 +~;
#X obj 518 194 cos~;
#X obj 518 169 -~ 0.5;
#X obj 364 133 +~ 1;
#X obj 364 291 *~;
#X obj 364 204 +~;
#X obj 398 181 samphold~;
#X obj 364 234 tabread4~ \$0-sample;
#X obj 518 217 +~ 1;
#X obj 518 238 *~ 0.5;
#X obj 398 158 r \$0-read-point;
#X msg 309 379 0 \, 44100 7000;
#X obj 309 400 line;
#X floatatom 349 441 10 0 0 1 samples - -, f 10;
#X obj 139 657 s \$0-samplerate;
#X obj 139 637 list split 1;
#X obj 420 588 r \$0-samplerate;
#X obj 400 609 f;
#X obj 400 559 t b f;
#X obj 400 630 /;
#X obj 424 62 wrap~;
#X obj 424 32 +~ 0.5;
#X obj 44 102 *~;
#X obj 364 102 *~;
#X obj 400 651 s \$0-phasor-freq;
#X obj 44 14 r \$0-phasor-freq;
#X obj 44 44 phasor~;
#X floatatom 479 429 5 0 0 0 - - -, f 5;
#X msg 479 388 4000;
#X obj 400 529 r \$0-grain-size;
#X obj 479 469 s \$0-grain-size;
#X text 530 523 If the grain size changes \, the frequency of the [phasor~]
reading through the grains needs to change too. We divide the sampling
rate by the grain size in order to get the [phasor~] frequency needed
for normal playback pitch/speed., f 20;
#X obj 394 102 r \$0-grain-size;
#X obj 74 102 r \$0-grain-size;
#X obj 72 542 r \$0-lb1;
#X obj 479 367 r \$0-lb2;
#X obj 168 397 loadbang;
#X obj 168 418 t b b;
#X obj 168 469 s \$0-lb2;
#X obj 208 439 s \$0-lb1;
#X text 544 324 Here \, you can set the size of the looping grains
(in samples \, not seconds). If the grains are too big \, you get weird
overlapping content. If they're too small \, you get amplitude modulation
distortion., f 21;
#X text 146 503 We need to loadbang the sample reading before loadbanging
the grain-size parameter. Otherwise \, we have no way to know that
the samplerate will arrive first in the calculation at right., f 28
;
#X connect 0 0 11 0;
#X connect 1 0 0 0;
#X connect 2 1 31 0;
#X connect 3 0 5 0;
#X connect 4 0 16 0;
#X connect 5 0 10 0;
#X connect 6 0 5 1;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 10 0 4 0;
#X connect 11 0 12 0;
#X connect 12 0 4 1;
#X connect 13 0 6 0;
#X connect 16 0 15 0;
#X connect 16 0 15 1;
#X connect 17 0 24 0;
#X connect 18 0 17 0;
#X connect 19 0 21 0;
#X connect 20 0 16 1;
#X connect 21 0 23 0;
#X connect 22 0 21 1;
#X connect 23 0 20 0;
#X connect 24 0 25 0;
#X connect 25 0 20 1;
#X connect 26 0 22 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 28 0 14 0;
#X connect 31 0 30 0;
#X connect 32 0 33 1;
#X connect 33 0 35 0;
#X connect 34 0 33 0;
#X connect 34 1 35 1;
#X connect 35 0 40 0;
#X connect 36 0 22 1;
#X connect 36 0 18 0;
#X connect 36 0 39 0;
#X connect 37 0 36 0;
#X connect 38 0 3 0;
#X connect 39 0 19 0;
#X connect 41 0 42 0;
#X connect 42 0 1 0;
#X connect 42 0 6 1;
#X connect 42 0 37 0;
#X connect 42 0 38 0;
#X connect 43 0 46 0;
#X connect 44 0 43 0;
#X connect 45 0 34 0;
#X connect 48 0 39 1;
#X connect 49 0 38 1;
#X connect 50 0 8 0;
#X connect 51 0 44 0;
#X connect 52 0 53 0;
#X connect 53 0 54 0;
#X connect 53 1 55 0;
